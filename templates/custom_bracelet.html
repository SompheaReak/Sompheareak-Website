<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Somphea Reak - Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .sold-out-badge { position: absolute; top: 12px; right: 12px; background: #ef4444; color: white; padding: 4px 10px; border-radius: 8px; font-size: 9px; font-weight: 900; text-transform: uppercase; z-index: 10; box-shadow: 0 4px 10px rgba(239, 68, 68, 0.4); }
    </style>
</head>
<body class="pb-20">

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 px-6 py-4 flex justify-between items-center shadow-sm">
        <a href="index.html" class="text-slate-400"><i class="fa-solid fa-house"></i></a>
        <h1 class="text-lg font-black uppercase italic tracking-tighter">Bracelet <span class="text-pink-500">Studio</span></h1>
        <div class="w-4"></div>
    </nav>

    <main class="p-4 max-w-5xl mx-auto">
        <div id="shop-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // --- CATALOG: Add your products here! ---
        const CATALOG = [
            { id: 1, name: "Silver Charm", price: 400, img: "c01.jpg" },
            { id: 1100, name: "Classic F1", price: 3000, img: "charm-f1–101.jpg" },
            { id: 1001, name: "Car Charm 01", price: 3000, img: "cc01.jpg" },
        ];

        const IMG_BASE = "https://raw.githubusercontent.com/sompheareak/Sompheareak-Website/main";
        const firebaseConfig = JSON.parse(__firebase_config);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'somphea-reak-multi';

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        async function init() {
            await signInAnonymously(auth);
            const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'inventory');
            onSnapshot(docRef, (snap) => {
                const stock = snap.exists() ? snap.data() : {};
                render(stock);
            });
        }

        function render(stock) {
            const grid = document.getElementById('shop-grid');
            grid.innerHTML = CATALOG.map(p => {
                const q = stock[p.id] || 0;
                const isOut = q <= 0;
                return `
                    <div class="bg-white p-3 rounded-[2rem] border border-slate-100 shadow-sm relative">
                        ${isOut ? '<div class="sold-out-badge">Out of Stock</div>' : ''}
                        <img src="${IMG_BASE}/${p.img}" class="w-full aspect-square object-cover rounded-[1.5rem] mb-3">
                        <p class="text-[10px] font-black uppercase truncate px-1">${p.name}</p>
                        <div class="flex justify-between items-center px-1 mt-1">
                            <span class="text-[11px] font-bold text-pink-500">${p.price}៛</span>
                            <span class="text-[9px] font-bold text-slate-300">${isOut ? '' : q + ' Left'}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        init();
    </script>
</body>
</html>

