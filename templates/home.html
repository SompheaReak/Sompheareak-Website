<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Somphea Reak Shop</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* your CSS, same as you posted */
        body { font-family: Arial, sans-serif; padding: 20px; font-size: 18px; margin-bottom: 100px; }
        h1 { text-align: center; margin-bottom: 10px; }
        .top-bar { text-align: center; margin-bottom: 20px; }
        .cart-counter { font-size: 22px; color: #007bff; font-weight: bold; }
        .language-switch { text-align: center; margin-bottom: 20px; }
        .language-switch button { padding: 10px 20px; font-size: 18px; background-color: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; }
        .banner { text-align: center; margin-bottom: 20px; }
        .banner img { width: 100%; max-width: 800px; border-radius: 10px; }
        .categories { text-align: center; margin-bottom: 10px; }
        .categories a { margin: 0 10px; font-size: 24px; text-decoration: none; color: #007bff; }
        .categories a:hover { text-decoration: underline; }
        .subcategories { text-align: center; margin-bottom: 20px; }
        .subcategories a { margin: 0 10px; font-size: 18px; color: #555; text-decoration: none; }
        .subcategories a:hover { text-decoration: underline; }
        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .product-card { border: 1px solid #ccc; padding: 15px; border-radius: 10px; text-align: center; }
        .product-card img { max-width: 100%; height: auto; border-radius: 10px; }
        .price { font-size: 20px; font-weight: bold; margin: 10px 0; }
        .add-cart-button { width: 100%; padding: 15px; font-size: 20px; background-color: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; }
        .floating-cart { position: fixed; bottom: 20px; right: 20px; background-color: #007bff; color: white; padding: 15px 20px; border-radius: 50px; font-size: 18px; text-decoration: none; box-shadow: 0 4px 6px rgba(0,0,0,0.3); z-index: 1000; }
    </style>
</head>
<body>

<!-- Language Switch -->
<div class="language-switch">
    <button onclick="switchLanguage()">Switch Language</button>
</div>

<!-- Success Message -->
<div id="success" style="display:none; position:fixed; top:20px; right:20px; background:#28a745; color:white; padding:15px 20px; border-radius:8px; font-size:18px; box-shadow:0px 4px 10px rgba(0,0,0,0.3); z-index:1000;">
    âœ… Item added to cart successfully!
</div>

<!-- Shop Title -->
<h1>Somphea Reak Shop</h1>

<!-- Top Bar -->
<div class="top-bar">
    <span class="cart-counter">ðŸ›’ Cart (<span id="cart-count">{{ cart|length }}</span>)</span>
</div>

<!-- Banner -->
<div class="banner">
    <img src="/static/images/banner.jpg" alt="Somphea Reak Banner">
</div>

<!-- Categories -->
<div class="categories">
    <a href="/category/Hot Sale">Hot Sale</a>
    <a href="/category/Toy">Toy</a>
    <a href="/category/Keychain">Keychain</a>
    <a href="/category/Accessories">Accessories</a>
</div>

<!-- Subcategories -->
{% if subcategories %}
<div class="subcategories">
    {% for sub in subcategories %}
        <a href="/subcategory/{{ sub }}">{{ sub }}</a>
    {% endfor %}
</div>
{% endif %}

<!-- Product Grid -->
<div class="product-grid">
    {% for product in products %}
    <div class="product-card">
        <img src="{{ product.image }}" alt="{{ product.name_en }}">
        <h3>{% if language == 'en' %}{{ product.name_en }}{% else %}{{ product.name_kh }}{% endif %}</h3>
        <p class="price">{{ product.price }}áŸ›</p>

        <form class="add-to-cart-form">
            <input type="hidden" name="product_id" value="{{ product.id }}">
            <div class="quantity-selector">
                <button type="button" onclick="decreaseQuantity(this)">-</button>
                <input type="number" name="quantity" value="1" min="1">
                <button type="button" onclick="increaseQuantity(this)">+</button>
            </div>
            <button type="submit" class="add-cart-button">Add to Cart</button>
        </form>
    </div>
    {% endfor %}
</div>

<!-- Floating Cart Button -->
<a href="/cart" class="floating-cart">
    ðŸ›’ Cart (<span id="cart-count">{{ cart|length }}</span>)
</a>

<!-- Switch Language Function -->
<script>
function switchLanguage() {
    const currentUrl = new URL(window.location.href);
    const lang = currentUrl.searchParams.get('lang') === 'kh' ? 'en' : 'kh';
    currentUrl.searchParams.set('lang', lang);
    window.location.href = currentUrl.toString();
}
</script>

<!-- Load script.js at very bottom -->
<script src="/static/script.js" defer></script>

</body>
</html>